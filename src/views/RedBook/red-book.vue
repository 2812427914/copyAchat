
<template>
    <van-config-provider theme="">...</van-config-provider>

    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
        style="position: absolute; width: 0; height: 0" aria-hidden="true" id="__SVG_SPRITE_NODE__">
        <symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" id="like">
            <path
                d="M3.256 3.913a3.083 3.083 0 00-.003 4.397L8 12.998l4.743-4.684h.001a3.085 3.085 0 000-4.4C12.145 3.32 11.345 3 10.511 3a3.17 3.17 0 00-1.91.635l-.6.452-.602-.452A3.173 3.173 0 005.49 3c-.834 0-1.633.321-2.233.913zm10.191 5.111L8.7 13.714a.996.996 0 01-1.398 0L2.55 9.02a4.083 4.083 0 01.003-5.82A4.165 4.165 0 015.49 2c.907 0 1.786.29 2.511.835A4.17 4.17 0 0110.511 2c1.093 0 2.147.422 2.936 1.202a4.085 4.085 0 010 5.822z">
            </path>
        </symbol>
        <symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="liked">
            <path
                d="M8 2.88A4.126 4.126 0 005.447 2a4.12 4.12 0 00-2.906 1.192 4.053 4.053 0 00-.004 5.769l4.83 4.78a.901.901 0 001.266 0l4.826-4.776a4.055 4.055 0 000-5.773A4.122 4.122 0 0010.552 2C9.626 2 8.73 2.306 8 2.88z"
                fill="#FF2442"></path>
        </symbol>

        <symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="collect">
            <path
                d="M19.049 24.906a2.127 2.127 0 002.1-.229c.61-.443.938-1.176.86-1.924l-.526-5.115a.583.583 0 01.147-.45l3.493-3.873a2.11 2.11 0 00.44-2.066 2.119 2.119 0 00-1.571-1.415l-5.138-1.102a.583.583 0 01-.38-.275L15.83 3.962a2.123 2.123 0 00-3.66 0L9.527 8.457a.583.583 0 01-.38.275L4.008 9.834a2.119 2.119 0 00-1.571 1.415 2.11 2.11 0 00.44 2.066l3.494 3.872c.11.123.164.287.147.45l-.527 5.116c-.077.748.25 1.481.86 1.924.61.444 1.41.53 2.1.229l4.816-2.102a.583.583 0 01.466 0l4.816 2.102zM4.177 12.143a.36.36 0 01-.076-.353.369.369 0 01.275-.245l5.138-1.102a2.333 2.333 0 001.522-1.099l2.643-4.495A.372.372 0 0114 4.667c.135 0 .256.07.322.182l2.643 4.495c.33.563.883.962 1.522 1.099l5.138 1.102a.369.369 0 01.274.245.36.36 0 01-.076.353l-3.493 3.872a2.333 2.333 0 00-.588 1.802l.527 5.115a.362.362 0 01-.148.33.377.377 0 01-.372.04L14.934 21.2a2.333 2.333 0 00-1.867 0l-4.815 2.102a.377.377 0 01-.372-.04.362.362 0 01-.149-.33l.528-5.115a2.333 2.333 0 00-.589-1.802l-3.493-3.873z"
                fill="currentColor"></path>
        </symbol>
        <symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="collected">
            <path
                d="M6.853 24.666a2.169 2.169 0 01-.884-1.976l.547-5.308-3.623-4.016a2.166 2.166 0 01-.453-2.12c.24-.738.855-1.292 1.615-1.455L9.38 8.65l2.74-4.659a2.18 2.18 0 013.76 0l2.741 4.66 5.326 1.141c.76.163 1.375.717 1.614 1.454.24.737.067 1.545-.452 2.121l-3.624 4.016.547 5.308a2.169 2.169 0 01-.884 1.976 2.186 2.186 0 01-2.158.235L14 22.724 9.012 24.9c-.71.31-1.532.22-2.158-.235z"
                fill="#FCBD54"></path>
        </symbol>
        <symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="chat">
            <path
                d="M5.57 19.224c.306.495.386 1.108.197 1.676l-.937 2.811 1.06-.2a62.665 62.665 0 011.582-.272c.424-.066.935-.139 1.278-.139.497 0 1.06.152 1.424.25l.093.025c.87.232 2.035.542 3.733.542 5.453 0 9.917-4.443 9.917-9.917 0-5.477-4.44-9.916-9.917-9.916-5.477 0-9.916 4.44-9.916 9.916 0 1.92.544 3.709 1.485 5.224zm-1.641 6.443a1.167 1.167 0 01-1.084-1.536l1.262-3.784a.236.236 0 00-.024-.199A11.612 11.612 0 012.333 14C2.333 7.557 7.558 2.334 14 2.334c6.444 0 11.667 5.223 11.667 11.666 0 6.444-5.25 11.667-11.667 11.667-1.932 0-3.277-.359-4.184-.6-.462-.124-.81-.217-1.066-.217-.725 0-4.467.75-4.777.813a.19.19 0 01-.044.004zm15.496-11.375a1.458 1.458 0 10-2.917 0 1.458 1.458 0 002.917 0zm-9.391 1.458a1.458 1.458 0 110-2.917 1.458 1.458 0 010 2.917z"
                fill="currentColor"></path>
        </symbol>
        <symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="share">
            <path
                d="M8.167 5.25h2.041a.875.875 0 100-1.75H8.167A4.667 4.667 0 003.5 8.167v11.667A4.667 4.667 0 008.167 24.5h11.666a4.667 4.667 0 004.667-4.666v-2.042a.875.875 0 10-1.75 0v2.041a2.917 2.917 0 01-2.917 2.917H8.167a2.917 2.917 0 01-2.917-2.916V8.167A2.917 2.917 0 018.167 5.25z"
                fill="currentColor"></path>
            <path
                d="M15.458 5.25h6.044l-9.344 9.344a.875.875 0 101.237 1.237l9.355-9.354v6.065a.875.875 0 001.75 0V4.667c0-.645-.522-1.167-1.167-1.167h-7.875a.875.875 0 000 1.75z"
                fill="currentColor"></path>
        </symbol>
        <symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="reply">
            <path
                d="M3.182 10.985c.175.283.221.633.113.958L2.76 13.55c.185-.036.393-.075.605-.114.308-.056.63-.113.904-.155A5.53 5.53 0 015 13.2c.285 0 .607.087.814.143l.054.014c.496.133 1.162.31 2.133.31A5.676 5.676 0 0013.666 8a5.667 5.667 0 10-10.484 2.985zm-.937 3.682a.667.667 0 01-.62-.878l.721-2.162a.135.135 0 00-.013-.114A6.667 6.667 0 1114.667 8c0 3.682-3 6.667-6.667 6.667-1.105 0-1.873-.205-2.391-.343-.264-.07-.463-.124-.61-.124-.414 0-2.552.429-2.73.464a.118.118 0 01-.024.003z"
                fill="currentColor"></path>
        </symbol>
        <symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="mention">
            <path
                d="M15.853 8.977c.022-.364.044-.637.06-.791a.75.75 0 111.491.146c-.013.136-.034.39-.055.736-.066 1.1-.08 2.252-.008 3.322.148 2.218.65 3.48 1.256 3.48 1.197 0 1.898-1.896 1.898-3.87a8.001 8.001 0 10-3.994 6.928.75.75 0 11.753 1.296 9.442 9.442 0 01-4.76 1.276 9.5 9.5 0 119.5-9.5c0 2.758-.965 5.37-3.397 5.37-1.37 0-2.13-1.077-2.504-2.907a4.356 4.356 0 01-7.949-2.459 4.356 4.356 0 017.695-2.793l.014-.234zm-.5 3.027a2.855 2.855 0 10-5.713.002 2.855 2.855 0 005.714-.001v-.001z">
            </path>
        </symbol>
        <symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="emoji">
            <path d="M10.496 14.5a1.802 1.802 0 003.008.005" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                stroke-linejoin="round"></path>
            <path fill-rule="evenodd" clip-rule="evenodd"
                d="M8.999 12a1 1 0 11.003-2 1 1 0 01-.003 2zM14.999 12a1 1 0 11.003-2A1 1 0 0115 12z" fill="currentColor">
            </path>
            <path clip-rule="evenodd" d="M12 20.5a8.5 8.5 0 100-17 8.5 8.5 0 000 17z" stroke="currentColor"
                stroke-width="1.5"></path>
        </symbol>

        <symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 25" id="thanks">
            <rect y=".5" width="24" height="24" rx="12" fill="#FF2442"></rect>
            <path d="M6 13l4 4 8-8" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        </symbol>
    </svg>
    <div data-v-024e536f="" class="note-detail-mask"
        style="transition: background-color 0.4s ease 0s; background: var(--mask-paper);">
        <div data-v-70c71a67="" data-v-024e536f="" id="" data-v-956360f6="" class="note-container" data-type="normal">
            <div data-v-11b921ce="" data-v-70c71a67="" class="">
                <div data-v-d21d8bf9="" data-v-11b921ce="" class="note-scroller">
                    <div data-v-5245913a="" data-v-11b921ce="" class="note-content">
                        <!-- <van-cell-group> -->
                        <van-field v-model="title" autosize rows="1" type="textarea" placeholder="请输入标题" data-v-5245913a=""
                            id="detail-title" class="title" />
                        <van-field v-model="description" autosize rows="1" type="textarea" placeholder="请输入描述"
                            data-v-5245913a="" class="desc" />
                        <!-- </van-cell-group> -->
                        <!-- <div data-v-5245913a="" id="detail-title" class="title">其实参加酒局多了，都差不多</div>
                        <div data-v-5245913a="" class="desc">没那么惊讶<br>人生不就是一场行为艺术吗<br> </div> -->
                    </div>
                    <div data-v-6b20f11f="" data-v-11b921ce="" class="comments-el">
                        <div data-v-6b20f11f="" class="comments-container">
                            <div data-v-6b20f11f="" class="total">共 {{ commentsList.length }} 条评论</div>
                            <div data-v-6b20f11f="" tag="div" name="list" class="list-container">
                                <div data-v-67377e58="" data-v-6b20f11f="" class="comment-item"
                                    v-for="(item, index) in commentsList" :key="item.id">
                                    <div data-v-67377e58="" class="comment-inner-container">
                                        <div data-v-67377e58="" class="avatar"><a data-v-1d0a8701="" data-v-67377e58=""
                                                href="/user/profile/6042256c000000000100152b" class="" target="_blank"><img
                                                    data-v-1d0a8701="" class="avatar" :src="item.avatar"
                                                    style="width: 32px; height: 32px;"></a></div>
                                        <div data-v-67377e58="" class="right">
                                            <div data-v-67377e58="" class="author-wrapper">
                                                <div data-v-67377e58="" class="author">
                                                    <a data-v-67377e58="" href="/user/profile/6042256c000000000100152b"
                                                        class="name" target="_blank">{{ item.username }}</a>
                                                    <span data-v-67377e58=""
                                                        style="font-size: 12px; color:rgba(51, 51, 51, 0.6); margin-left: 4px;">
                                                        1楼
                                                    </span>
                                                </div>
                                                <div data-v-67377e58="" class="interactions" style="font-size: 12px">
                                                    <div data-v-67377e58="" class="reply icon-container">
                                                        <span data-v-67377e58="" style="margin-right: 4px;"
                                                            @click="copy_comment(index, item.content)">复制</span>

                                                        <svg @click="replyComment(index, 1, item)" data-v-7c2d5134=""
                                                            data-v-67377e58="" style="margin-left: 8px"
                                                            class="reds-icon reply-icon" width="16" height="16">
                                                            <use data-v-7c2d5134="" xlink:href="#reply"></use>
                                                        </svg>
                                                        <span data-v-67377e58="" class="count">{{ item.reply_cnt }}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div data-v-67377e58="" class="content">
                                                <!-- {{ item.content }} -->
                                                <van-text-ellipsis style="white-space: normal;" rows="5"
                                                    :content="item.content" expand-text="展开" collapse-text="收起"
                                                    position="middle" />
                                                <!-- <vue-ellipsis-3
                                                :visible-line="1"
                                                use-inner-html
                                                text="<b>这是一段</b><u>非常非常非常非常非常非常非常非常非常非常非常长</u>的话">
                                                </vue-ellipsis-3> -->
                                            </div>

                                            <div data-v-67377e58="" class="labels"></div>
                                            <!-- <div data-v-67377e58="" class="info">
                                                <div data-v-67377e58="">
                                                    <span data-v-67377e58="">
                                                        {{ item.date }}
                                                        第1楼
                                                    </span>
                                                    <span data-v-67377e58="" class="location">上海</span>
                                                </div>
                                                <div data-v-67377e58="" class="interactions">
                                                    <div data-v-67377e58="" class="like"><span data-v-809eb46a=""
                                                            data-v-67377e58="" class="like-wrapper" points="[object Object]"
                                                            track-data="[object Object]"><span data-v-809eb46a=""
                                                                class="like-lottie"
                                                                style="width: 16px; height: 16px;"></span><svg
                                                                data-v-7c2d5134="" data-v-809eb46a=""
                                                                class="reds-icon like-icon" width="16" height="16">
                                                                <use data-v-7c2d5134="" xlink:href="#like"></use>
                                                            </svg><span data-v-809eb46a="" class="count">1138</span></span>
                                                    </div>
                                                    <div data-v-67377e58="" class="reply icon-container">
                                                        <span data-v-67377e58="" style="margin-right: 4px;"
                                                            @click="copy_comment(item.content)">复制</span>
                                                        <svg data-v-7c2d5134="" data-v-67377e58=""
                                                            class="reds-icon reply-icon" width="16" height="16">
                                                            <use data-v-7c2d5134="" xlink:href="#reply"></use>
                                                        </svg>
                                                        <span data-v-67377e58="" class="count">{{ item.reply_cnt ?
                                                            item.reply_cnt : 100 }}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div> -->
                                            <div data-v-67377e58="" class="reply-container">
                                                <div data-v-6b20f11f="" data-v-67377e58-s="" tag="div" name="list"
                                                    class="list-container">
                                                    <div data-v-67377e58="" data-v-6b20f11f="" data-v-67377e58-s=""
                                                        class="comment-item" v-for="(comment_reply, idx) in item.replys"
                                                        :key="comment_reply.id">
                                                        <div data-v-67377e58="" class="comment-inner-container">
                                                            <div data-v-67377e58="" class="avatar"><a data-v-1d0a8701=""
                                                                    data-v-67377e58=""
                                                                    href="/user/profile/559a20e467bc6501eaa4443f" class=""
                                                                    target="_blank"><img data-v-1d0a8701="" class="avatar"
                                                                        :src="comment_reply.avatar"
                                                                        style="width: 24px; height: 24px;"></a></div>
                                                            <div data-v-67377e58="" class="right">
                                                                <div data-v-67377e58="" class="author-wrapper">
                                                                    <div data-v-67377e58="" class="author">
                                                                        <a data-v-67377e58=""
                                                                            href="/user/profile/559a20e467bc6501eaa4443f"
                                                                            class="name" target="_blank">{{
                                                                                comment_reply.username }}
                                                                        </a>

                                                                        <span data-v-67377e58=""
                                                                            style="font-size: 12px; color:rgba(51, 51, 51, 0.6); margin-left: 4px;">
                                                                            {{ idx + 2 }}楼
                                                                        </span>
                                                                    </div>
                                                                    <div data-v-67377e58="" class="interactions"
                                                                        style="font-size: 12px">
                                                                        <div data-v-67377e58=""
                                                                            class="reply icon-container">
                                                                            <span data-v-67377e58=""
                                                                                style="margin-right: 4px;"
                                                                                @click="copy_comment(comment_reply)">复制</span>

                                                                            <svg @click="replyComment(index, idx + 2, comment_reply)"
                                                                                data-v-7c2d5134="" data-v-67377e58=""
                                                                                class="reds-icon reply-icon" width="16"
                                                                                height="16" style="margin-left: 8px">
                                                                                <use data-v-7c2d5134="" xlink:href="#reply">
                                                                                </use>
                                                                            </svg>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                                <!-- <div data-v-67377e58="" class="content">
                                                                    <span data-v-67377e58="">回复</span>
                                                                    <span data-v-67377e58="" style="margin-left: 2px; color: #13386c">{{ comment_reply.reply_to_floor+"楼 "+comment_reply.reply_to_username }}</span>
                                                                    {{ comment_reply.content }}
                                                                   
                                                                </div> -->
                                                                <van-text-ellipsis data-v-67377e58="" class="content"
                                                                    style="white-space: normal;" rows="5"
                                                                    :content="'回复 ' + comment_reply.reply_to_floor + '楼 ' + comment_reply.reply_to_username + ': ' + comment_reply.content"
                                                                    expand-text="展开" collapse-text="收起" position="middle">
                                                                </van-text-ellipsis>
                                                                <!-- <div  v-if="comment_reply.content" v-html="md.render(comment_reply.content)">
                                                                </div> -->
                                                                <div data-v-67377e58="" class="labels"></div>
                                                                <!-- <div data-v-67377e58="" class="info">
                                                                    <div data-v-67377e58="">
                                                                        <span data-v-67377e58="">{{ idx + 2 }}楼</span>
                                                                        <span data-v-67377e58="">{{ comment_reply.date }}</span>
                                                                        <span data-v-67377e58="" class="location">浙江</span>
                                                                    </div>
                                                                    <div data-v-67377e58="" class="interactions">
                                                                        <div data-v-67377e58="" class="like"><span
                                                                                data-v-809eb46a="" data-v-67377e58=""
                                                                                class="like-wrapper"
                                                                                points="[object Object]"
                                                                                track-data="[object Object]"><span
                                                                                    data-v-809eb46a="" class="like-lottie"
                                                                                    style="width: 16px; height: 16px;"></span><svg
                                                                                    data-v-7c2d5134="" data-v-809eb46a=""
                                                                                    class="reds-icon like-icon" width="16"
                                                                                    height="16">
                                                                                    <use data-v-7c2d5134=""
                                                                                        xlink:href="#like"></use>
                                                                                </right-icon	svg><span data-v-809eb46a=""
                                                                                    class="count">746</span></span></div>
                                                                        <div data-v-67377e58=""
                                                                            class="reply icon-container">
                                                                            <span data-v-67377e58=""
                                                                                style="margin-right: 4px;"
                                                                                @click="copy_comment(comment_reply.content)">复制</span>
                                                                            <svg data-v-7c2d5134="" data-v-67377e58=""
                                                                                class="reds-icon reply-icon" width="16"
                                                                                height="16">
                                                                                <use data-v-7c2d5134="" xlink:href="#reply">
                                                                                </use>
                                                                            </svg>
                                                                        </div>
                                                                    </div>
                                                                </div> -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div v-if="item.reply_cnt - item.replys.length > 0" data-v-6b20f11f=""
                                                    data-v-67377e58-s="" class="show-more" @click="text_expand(index)">展开 {{
                                                        item.reply_cnt - item.replys.length }} 条回复
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <van-popup @keydown.enter.native="submitComment" v-model:show="fromButton" position="bottom"
                    :style="{ height: preShowIndex != -1 ? '50%' : '' }">
                    <!-- <van-popup v-model:show="fromButton" position="bottom"> -->
                    <template #default>
                        <!-- <van-cell-group> -->
                        <van-field :border="false" v-model="commentContent" :placeholder=commentContentPlaceHolder.content
                            type="textarea" rows="3" />
                        <van-row style="padding-bottom:12px;">
                            <van-col span="12">
                                <svg @click="bottomShow(0)" class="reds-icon" width="24" height="24"
                                    :style="{ 'margin-left': '12px', 'color': preShowIndex == 0 ? '#13386c' : '#969799' }">
                                    <use data-v-7c2d5134="" xlink:href="#chat"></use>
                                </svg>
                                <svg @click="bottomShow(1)" class="reds-icon" width="24" height="24"
                                    :style="{ 'margin-left': '12px', 'color': preShowIndex == 1 ? '#13386c' : '#969799' }">
                                    <use data-v-7c2d5134="" xlink:href="#mention"></use>
                                </svg>
                            </van-col>
                            <van-col span="12">
                                <div @click="submitComment" style="
                                    background-color: #408af2;
                                    font-size: 14px;
                                    position: absolute;
                                    right: 24px;
                                    color: white;
                                    border-radius: 18px;
                                    padding-top: 3px;
                                    padding-bottom: 3px;
                                    padding-left: 18px;
                                    padding-right: 18px;">发送</div>
                            </van-col>
                        </van-row>
                        <!-- </van-cell-group> -->
                        <!-- <van-field v-model="commentContent" placeholder="说点什么..." type="textarea" rows="3" boder="{{ false }}"/> -->

                        <van-checkbox-group v-if="bottomShowList[0]" v-model="checkedClipBoard">
                            <van-cell-group>
                                <van-cell v-for="(item, idx) in clipBoardList" clickable :key="item"
                                    @click="toggleClipBoard(idx)">
                                    <template #title>
                                        <div>
                                            <van-text-ellipsis :content="item" />
                                        </div>

                                    </template>
                                    <template #right-icon>
                                        <van-checkbox :name="item" :ref="el => checkboxRefsClipBoard[idx] = el"
                                            @click.stop />
                                    </template>
                                </van-cell>
                            </van-cell-group>
                        </van-checkbox-group>
                        <van-checkbox-group v-if="bottomShowList[1]" v-model="checkedAgent">
                            <van-cell-group>
                                <!-- <van-cell v-for="(item, idx) in agentList" clickable :key="item" :title="`复选框 ${item}`" -->
                                <van-cell v-for="(item, idx) in agentList" clickable :key="item"
                                    :title="item.role + ':' + item.content" @click="toggleAgent(idx)">
                                    <template #right-icon>
                                        <van-checkbox :name="idx" :ref="el => checkboxRefsAgent[idx] = el" @click.stop />
                                    </template>
                                </van-cell>
                            </van-cell-group>
                        </van-checkbox-group>
                    </template>
                </van-popup>

                <div data-v-11b921ce="" class="interactions">
                    <van-field type="textarea" autosize rows="1" @keydown.enter.native="submitComment" ref="commentField"
                        style="background-color: rgba(0, 0, 0, 0.03); border-radius: 22px;" v-model="commentContent"
                        :placeholder=commentContentPlaceHolder.content>
                        <template #right-icon>
                            <svg @click="clearReplyTo" class="reds-icon" width="24" height="24" style="margin-left: 8px;">
                                <use xlink:href="#chat"></use>
                            </svg>
                            <svg @click="submitComment()" class="reds-icon" width="24" height="24"
                                style="margin-left: 8px;">
                                <use xlink:href="#chat"></use>
                            </svg>
                            <svg @click="fromButton = true; bottomShow(1)" class="reds-icon" width="24" height="24">
                                <use xlink:href="#mention"></use>
                            </svg>

                        </template>

                    </van-field>

                    <!-- <div  data-v-e6930618="" data-v-e223d0aa="" data-v-11b921ce="" class="comment-wrapper comment-comp">

                        <div  data-v-e6930618="" class="mention-select-container close"></div>
                        <div   data-v-e6930618="" class="input-wrapper">
                            <input  data-v-e6930618="" class="comment-input"
                                type="text" placeholder="说点什么..." data-tribute="true" @click="showPopUp">
                            <div data-v-e6930618="" class="input-buttons">
                                <svg data-v-7c2d5134="" data-v-e6930618=""
                                    class="reds-icon" width="24" height="24" id="showMentionEl">
                                    <use data-v-7c2d5134="" xlink:href="#mention"></use>
                                </svg>
                            </div>
                        </div><button data-v-e6930618="" class="submit">发送</button>
                    </div> -->
                </div>
            </div>
        </div>
    </div>
</template>

<script setup>
import { ref, onMounted, onBeforeUpdate } from 'vue'
import { getRedBookCommentsList, getCommentsReplyList } from "@/api/index";
import { Configuration, OpenAIApi } from 'openai'
import { HuggingFaceInference } from "langchain/llms/hf";
import { Replicate } from "langchain/llms/replicate";
// import { md } from "@/views/RedBook/markdown";

const huggingFaceInference = new HuggingFaceInference({
    model: "gpt2",
    apiKey: "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", // In Node.js defaults to process.env.HUGGINGFACEHUB_API_KEY
});
// const res = await model.call("1 + 1 =");
// console.log({ res });


// const replicate = new Replicate({
//   model:
//     "a16z-infra/llama13b-v2-chat:df7690f1994d94e96ad9d568eac121aecf50684a0b0963b25a41cc40061269e5",
// });


const configuration = new Configuration({
    apiKey: 'sk-8ElYpCJqbbfjvu83TsIpKeUIuqhcc9COSrJgD4rxpzM6dHe3',
    basePath: 'https://api.chatanywhere.cn',
})

const openai = new OpenAIApi(configuration)

// 标题和描述
const title = ref('其实参加酒局多了，都差不多')
const description = ref('没那么惊讶\n人生不就是一场行为艺术吗')


// 处理评论区展示
const commentsList = ref([]);
const names = ref([]);
const reply_ids = ref([]);

const getCommentsList = async () => {
    const { data } = await getRedBookCommentsList();
    let items = data.result.items
    // 给一级评论的子评论添加 reply_to_floor、reply_to_username
    let comments_length = data.result.items.length;
    for (let i = 0; i < comments_length; i++) {
        let replys_length = data.result.items[i].replys.length;
        let tmp_reply_ids = []
        let tmp_names = []
        let comment = data.result.items[i]
        tmp_reply_ids.push(comment.id)
        tmp_names.push(comment.username)
        for (let j = 0; j < replys_length; j++) {
            let reply_to_floor = tmp_reply_ids.indexOf(comment.replys[j].reply_to) + 1
            items[i].replys[j].reply_to_floor = reply_to_floor
            items[i].replys[j].reply_to_username = tmp_names[reply_to_floor - 1]
            tmp_reply_ids.push(comment.replys[j].id)
            tmp_names.push(comment.replys[j].username)
        }
        names.value.push(tmp_names)
        reply_ids.value.push(tmp_reply_ids)
    }
    commentsList.value = commentsList.value.concat(items);
}

// onMounted(async () => {
//     getCommentsList();
// });


// 声明一个 ref 来存放该元素的引用
// 必须和模板里的 ref 同名
const commentField = ref(null)
onMounted(() => {
    getCommentsList()
    commentField.value.focus()
});
// mounted (() => {
//     this.$refs.commentField.focus()
// })
// mounted() {
//     this.$refs.checkbox.toggle();
//   }

// 下拉刷新commentList：pagenation
// getCommentsList()

// 点击 展开更多回复
const text_expand = async (comment_index) => {
    const { data } = await getCommentsReplyList(commentsList.value[comment_index].id);
    let replys_more = data.result.items
    let replys_length = replys_more.length
    let tmp_reply_ids = reply_ids.value[comment_index]
    let tmp_names = names.value[comment_index]
    for (let j = 0; j < replys_length; j++) {
        let reply_to_floor = tmp_reply_ids.indexOf(replys_more[j].reply_to) + 1
        replys_more[j].reply_to_floor = reply_to_floor
        replys_more[j].reply_to_username = tmp_names[reply_to_floor - 1]
        tmp_reply_ids.push(replys_more[j].id)
        tmp_names.push(replys_more[j].username)
    }
    commentsList.value[comment_index].replys = commentsList.value[comment_index].replys.concat(replys_more)
    names.value[comment_index] = tmp_names
    reply_ids.value[comment_index] = tmp_reply_ids
}

// 点击复制按钮
const copy_comment = (content) => {
    console.log('content')
}


// 控制底部弹出框+剪贴板+agent
const fromButton = ref(false)
const preShowIndex = ref(-1)
const bottomShowList = ref([false, false])

const clipBoardList = ref(['1', '2', '34', '5', '6', '7', '8'])
const checkedClipBoard = ref([])
const checkboxRefsClipBoard = ref([])
const toggleClipBoard = (index) => {
    checkboxRefsClipBoard.value[index].toggle()
}
const agentList = ref([
    { 'role': 'alex', 'content': 'you are alex, a excellent agent.' },
    { 'role': '小明', 'content': '你叫小明，你是一个非常有帮助的助手' },
    { 'role': 'python专家', 'content': '你叫python专家，你是一个python编程专家' },
])
// const agentList = ref(['5', '6', '7', '8'])
const checkedAgent = ref([])
const checkboxRefsAgent = ref([])
const toggleAgent = (index) => {
    checkboxRefsAgent.value[index].toggle()
}

const bottomShow = (index) => {
    if (preShowIndex.value == -1) {
        bottomShowList.value[index] = true
        preShowIndex.value = index
    }
    else if (preShowIndex.value == index) {
        bottomShowList.value[index] = false
        preShowIndex.value = -1
    } else {
        bottomShowList.value[preShowIndex.value] = false
        bottomShowList.value[index] = true
        preShowIndex.value = index
    }
}

onBeforeUpdate(() => {
    checkboxRefsClipBoard.value = []
    checkboxRefsAgent.value = []
});

// 输入框回车激活submitComment
// 获得最终comment内容
const commentContent = ref('')
const submitComment = () => {  // 发表评论
    // console.log(commentContent.value)
    // console.log(checkedClipBoard.value)
    // console.log(checkedAgent.value)
    // return

    // 内容为空，点击无效
    if (commentContent.value == '') {
        return ''
    }

    let prefix = '@'
    let agentRole = checkedAgent.value.map(item => prefix + agentList.value[item]['role'])
    // console.log(agentRole)
    agentRole = agentRole.join('->')
    // console.log(agentRole)
    // return 
    let clipboard_ = checkedClipBoard.value.join(',')
    let commentContent_ = commentContent.value
    let composedComment = agentRole + '\n' + clipboard_ + '\n' + commentContent_

    // 评论上传数据库，请求success，同时更新 names 和 reply_ids
    if (commentContentPlaceHolder.value.index == -1) {  //一级评论
        commentsList.value.push({
            id: 'a4',
            avatar: 'https://i2.hdslb.com/bfs/face/27ec942e8d4e6e024d3a9f11240d81a0aa90caca.jpg@60w_60h_1c.png',
            username: '唐某人',
            content: composedComment,
            date: '08-06',
            reply_cnt: 0,
            cue_who: checkedAgent.value.map(item => agentList.value[item]['role']),
            replay_to_floor: -1,
            reply_to_username: '-1',
            replys: [],
        })
        reply_ids.value.push([commentContentPlaceHolder.value.index + 'a4'])
        names.value.push(['唐某人'])
    } else {                                              // 评论的子评论
        // let tmp_reply_ids = reply_ids.value[commentContentPlaceHolder.value.index]
        // let tmp_names = names.value[commentContentPlaceHolder.value.index]
        reply_ids.value[commentContentPlaceHolder.value.index].push(commentContentPlaceHolder.value.index + 'a4')
        names.value[commentContentPlaceHolder.value.index].push('唐某人')
        commentsList.value[commentContentPlaceHolder.value.index].replys.push({
            id: commentContentPlaceHolder.value.index + 'a4',
            avatar: 'https://i2.hdslb.com/bfs/face/27ec942e8d4e6e024d3a9f11240d81a0aa90caca.jpg@60w_60h_1c.png',
            username: '唐某人',
            content: composedComment,
            date: '08-06',
            reply_to: commentContentPlaceHolder.value.comment.id,
            cue_who: checkedAgent.value.map(item => agentList.value[item]['role']),
            reply_to_floor: commentContentPlaceHolder.value.floor,
            reply_to_username: commentContentPlaceHolder.value.comment.username
        })

        // 回复成功，当前评论的一级评论的子评论数量+1
        commentsList.value[commentContentPlaceHolder.value.index].reply_cnt += 1

    }

    let agentContent = checkedAgent.value.map(item => agentList.value[item]['content'])
    if (checkedAgent.value.length == 0 && agentList.value.map(item => item['role']).includes(commentContentPlaceHolder.value.comment.username)) {
        for (let i = 0; i < agentList.value.length; i++) {
            if (commentContentPlaceHolder.value.comment.username == agentList.value[i]['role']) {
                agentContent = [agentList.value[i]['content']]
            }
        }

    }
    const messages = ref([
        { "role": "system", "content": agentContent[0] + '\n' + description.value },
        { "role": "user", "content": clipboard_ + '\n' + commentContent_ },
    ])

    // 如果 @ 了agent，或者回复了agent的消息，需要agent做出回应
    if (checkedAgent.value.length >= 1 || agentList.value.map(item => item['role']).includes(commentContentPlaceHolder.value.comment.username)) {
        llmResponse(messages)
    } else {
        // 重置 commentContentPlaceHolder，checkedClipBoard, checkboxRefsClipBoard, checkedAgent, checkboxRefsAgent
        checkedClipBoard.value = []
        checkboxRefsClipBoard.value = []
        checkedAgent.value = []
        checkboxRefsAgent.value = []
        commentContentPlaceHolder.value = {
            content: '说点什么...',
            index: -1,
            floor: -1,
            comment: {}
        }
    }

    // 清理 commentContent，
    commentContent.value = ''

    // 重置 fromButton, preShowIndex, bottomShowList
    fromButton.value = false
    preShowIndex.value = -1
    bottomShowList.value = [false, false]
}

// const decoder = new TextDecoder("utf-8");

// const readStream = async (
//   reader,
//   status
// ) => {
//   let partialLine = "";

//   while (true) {
//     // eslint-disable-next-line no-await-in-loop
//     const { value, done } = await reader.read();
//     if (done) break;

//     const decodedText = decoder.decode(value, { stream: true });

//     if (status !== 200) {
//       const json = JSON.parse(decodedText); // start with "data: "
//       const content = json.error.message ?? decodedText;
//       appendLastMessageContent(content);
//       console.log(message.value)
//       return;
//     }

//     const chunk = partialLine + decodedText;
//     const newLines = chunk.split(/\r?\n/);

//     partialLine = newLines.pop() ?? "";

//     for (const line of newLines) {
//       if (line.length === 0) continue; // ignore empty message
//       if (line.startsWith(":")) continue; // ignore sse comment message
//       if (line === "data: [DONE]") return; //

//       const json = JSON.parse(line.substring(6)); // start with "data: "
//       const content =
//         status === 200
//           ? json.choices[0].delta.content ?? ""
//           : json.error.message;
//       appendLastMessageContent(content);
//       console.log(message.value)
//     }
//   }
// };

// const appendLastMessageContent = (content) =>
//   (message.value[message.value.length - 1].content += content);

// agent 回复
const llmResponse = async (messages) => {
    if (checkedAgent.value.length > 1) {
        // alert
        console.log('目前仅支持同时@一个agent')
        return
    }
    // const apiKey = 'sk-8ElYpCJqbbfjvu83TsIpKeUIuqhcc9COSrJgD4rxpzM6dHe3'
    // const result = await fetch("https://api.chatanywhere.com.cn/v1/chat/completions", {
    //     method: "post",
    //     // signal: AbortSignal.timeout(8000),
    //     // 开启后到达设定时间会中断流式输出
    //     headers: {
    //     "Content-Type": "application/json",
    //     Authorization: `Bearer ${apiKey}`,
    //     },
    //     body: JSON.stringify({
    //     model: "gpt-3.5-turbo",
    //     stream: true,
    //     messages: messages,
    //     }),
    // });

    // const { body, status } = result
    // if (body) {
    //   const reader = body.getReader();
    //   await readStream(reader, status);
    // }


    // const llmResponse_ = await openai.createChatCompletion({
    //     model: 'gpt-3.5-turbo',
    //     messages: messages,
    //     // stream: true   //流式响应
    // })
    // let agentComment = llmResponse_.data.choices[0].message.content

    // console.log(llmResponse_)

    const res = await huggingFaceInference.call(messages.value[0].content);
    // const res = await replicate.call(messages.value[0].content)

    let agentComment = res


    // 如果是@agent回复新建的一级评论
    let index = commentsList.value.length - 1
    let username = checkedAgent.value.length >= 1 ? agentList.value[checkedAgent.value[0]]['role'] : commentContentPlaceHolder.value.comment.username
    let reply_id = 'a5'
    let reply_to = commentsList.value[index].id
    let reply_to_floor = 1
    let reply_to_username = commentsList.value[index].username

    if (commentContentPlaceHolder.value.index != -1) {  // @agent 二级评论
        index = commentContentPlaceHolder.value.index
        reply_id = index + 'a5'
        let replys = commentsList.value[index].replys
        reply_to = replys[replys.length - 1].id,
            reply_to_floor = replys.length + 1
        reply_to_username = replys[replys.length - 1].username
    }

    reply_ids.value[index].push(reply_id)
    names.value[index].push(username)
    commentsList.value[index].replys.push({
        id: reply_id,
        avatar: 'https://i1.hdslb.com/bfs/face/7f3605a11f54e5ac1719e7877c641a19da137d32.jpg@60w_60h_1c.png',
        username: username,
        content: agentComment, //llmResponse_.data.choices[0].message.content,
        date: '08-06',
        reply_to: reply_to,
        cue_who: [],
        reply_to_floor: reply_to_floor,
        reply_to_username: reply_to_username
    })

    // 回复成功，当前评论的一级评论的子评论数量+1
    commentsList.value[index].reply_cnt += 1

    // 重置 commentContentPlaceHolder，checkedClipBoard, checkboxRefsClipBoard, checkedAgent, checkboxRefsAgent
    checkedClipBoard.value = []
    checkboxRefsClipBoard.value = []
    checkedAgent.value = []
    checkboxRefsAgent.value = []
    commentContentPlaceHolder.value = {
        content: '说点什么...',
        index: -1,
        floor: -1,
        comment: {}
    }

    // 回复成功后默认继续回复agent的当前回复
    let agentFloor = reply_to_floor + 1 // commentsList.value[index].replys.length+1
    console.log('default replyComment after agent reply to user', agentFloor, commentsList.value[index].replys[agentFloor - 2])
    replyComment(index, agentFloor, commentsList.value[index].replys[agentFloor - 2])
}



// 回复某个评论按钮
const commentContentPlaceHolder = ref({
    content: '说点什么...',
    index: -1,
    floor: -1,
    comment: {}
})
const replyComment = (index, floor, comment) => {
    // floor：第 floor 楼
    commentContentPlaceHolder.value = {
        content: `回复 ${floor}楼 ${comment.username}`,
        floor: floor,
        index: index,
        comment: comment
    }
    commentField.value.focus()  //聚焦到输入框
    console.log(commentContentPlaceHolder.value)
}

// 清除commentContentPlaceHolder按钮， 清除回复某个评论的 placeholder，直接成为一级评论
const clearReplyTo = () => {
    commentContentPlaceHolder.value = {
        content: '说点什么...',
        index: -1,
        floor: -1,
        comment: {}
    }
}
</script>


<style lang="less" scoped>
.note-detail-mask[data-v-024e536f] {
    position: fixed;
    left: 0;
    top: 0;
    display: flex;
    width: 100vw;
    height: 100vh;
    z-index: 20;
    overflow: auto;
}

.author[data-v-70c71a67] {
    display: flex;
}

.author[data-v-70c71a67] {
    display: none;
    background: #fff;
    height: 64px;
    position: -webkit-sticky;
    position: sticky;
    z-index: 5;
    top: 0;
}

.author[data-v-ebd8abd4] {
    padding: 12px;
}

.author .info[data-v-ebd8abd4] {
    padding-left: 48px;
}

.author .info[data-v-ebd8abd4] {
    display: flex;
    align-items: center;
}

.avatar[data-v-1d0a8701] {
    align-items: center;
    justify-content: center;
    display: flex;
    cursor: pointer;
    border-radius: 100%;
    border: 1px solid rgba(0, 0, 0, 0.08);
    object-fit: cover;
}

a {
    text-decoration: none;
    background-color: transparent;
}

.author .name[data-v-ebd8abd4] {
    margin-left: 12px;
    font-weight: 500;
    font-size: 16px;
    color: #333;
}


// body,
// html {
//     font-size: 14px;
//     color: #333;
//     width: 100vw !important;
//     max-width: 100%;
//     font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif, BlinkMacSystemFont, Helvetica Neue, Arial, PingFang SC, PingFang TC, PingFang HK, Microsoft Yahei, Microsoft JhengHei;
//     margin: 0;
//     background-color: #fff;
//     -webkit-font-smoothing: antialiased;
// }
.author .follow[data-v-ebd8abd4] {
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 18px;
    width: 68px;
    height: 36px;
    background: #ff2442;
    font-weight: 500;
    font-size: 14px;
    color: #fff;
    cursor: pointer;
}

.note-scroller[data-v-11b921ce] {
    overflow: initial;
}

.note-scroller[data-v-11b921ce] {
    transition: scroll .4s;
    overflow-y: scroll;
    flex-grow: 1;
}

.note-content[data-v-5245913a] {
    padding: 10px 0 20px;
    margin: 0 5px;
    color: #333;
    // border-bottom: 1px solid rgba(0, 0, 0, 0.08);
    // padding: 10px 0 0px;
}

.title[data-v-5245913a] {
    // margin-bottom: 20px;
    font-weight: 600;
    font-size: 20px;
    line-height: 32px;
    // font-size: 15px;
    // line-height: 16px;
}

.desc[data-v-5245913a] {
    margin: 0;
    font-weight: 400;
    font-size: 16px;
    line-height: 28px;
    color: #333;
    // white-space: pre-wrap;
    overflow-wrap: break-word;
    // font-size: 13px;
    // line-height: 15px;
}

.tag[data-v-5245913a] {
    margin-right: 2px;
    color: #13386c;
}

.date[data-v-5245913a] {
    margin-top: 10px;
    font-size: 12px;
    line-height: 24px;
    color: rgba(51, 51, 51, 0.6);
}

.comments-el[data-v-6b20f11f] {
    position: relative;
}

.comments-container[data-v-6b20f11f] {
    // padding: 20px 30px;
    // padding: 0px 20px;
    padding: 0px 20px 70px 20px;
}

.total[data-v-6b20f11f] {
    font-size: 14px;
    line-height: 18px;
    color: rgba(51, 51, 51, 0.6);
    // font-size: 11px;
    // line-height: 15px;
}

.list-container[data-v-6b20f11f] {
    position: relative;
}

.comment-inner-container[data-v-67377e58] {
    position: relative;
    display: flex;
    z-index: 1;
    width: 100%;
    flex-shrink: 0;
}

.note-scroller {
    transition: scroll .4s;
    overflow-y: scroll;
    flex-grow: 1;
}

// .note-content {
//     padding: 10px 0 20px;
//     margin: 0 30px;
//     color: #333;
//     border-bottom: 1px solid rgba(0, 0, 0, 0.08);
// }

// .desc {
//     margin: 0;
//     font-weight: 400;
//     font-size: 16px;
//     line-height: 28px;
//     color: #333;
//     white-space: pre-wrap;
//     overflow-wrap: break-word;
// }

// .total[data-v-6b20f11f] {
//     font-size: 14px;
//     line-height: 18px;
//     color: rgba(51, 51, 51, 0.6);
// }

.list-container[data-v-6b20f11f] {
    position: relative;
}

.comment-item[data-v-67377e58] {
    position: relative;
    display: flex;
    margin-top: 12px;
}

.comment-inner-container[data-v-67377e58] {
    position: relative;
    display: flex;
    z-index: 1;
    width: 100%;
    flex-shrink: 0;
}

.note-scroller[data-v-11b921ce][data-v-d21d8bf9] {
    transition: scroll 0.4s;
    overflow-y: scroll;
    flex-grow: 1;
}

.note-scroller[data-v-11b921ce][data-v-d21d8bf9] {
    overflow: initial;
}

.author[data-v-ebd8abd4] {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    height: 80px;
    padding: 20px 24px;
    border-bottom: 1px solid transparent;
}

.note-scroller[data-v-d21d8bf9] {
    transition: scroll 0.4s;
    overflow-y: scroll;
    flex-grow: 1;
}

// .interactions[data-v-11b921ce][data-v-d21d8bf9] {
//     flex-shrink: 0;
//     padding: 3vw 6vw 6vw;
//     height: 35.5vw;
//     border-top: 1px solid rgba(0, 0, 0, 0.08);
//     flex-basis: 32.5vw;
//     background-color: #fff;
//     z-index: 1;
// }


.interactions[data-v-11b921ce] {
    // flex-shrink: 0;
    // padding: 12px 24px 24px;
    // height: 142px;
    border-top: 1px solid rgba(0, 0, 0, 0.08);
    flex-basis: 130px;
    background-color: #fff;
    z-index: 1;
    padding: 12px 12px 12px;
}

.interactions[data-v-11b921ce] {
    // position: -webkit-sticky;
    // position: sticky;
    bottom: 0;
    position: absolute;
    width: 100%;
}

.buttons[data-v-36e1f3e7] {
    display: flex;
    justify-content: space-between;
}

.buttons .left[data-v-36e1f3e7] {
    display: flex;
}

.like-wrapper[data-v-809eb46a] {
    position: relative;
    cursor: pointer;
    display: flex;
    align-items: center;
}

.like-lottie[data-v-809eb46a] {
    position: absolute;
    left: 0;
    top: 0;
    transform: scale(1.7);
}

.reds-icon[data-v-7c2d5134] {
    display: inline-block;
    vertical-align: middle;
    fill: currentColor;
}

.collect-wrapper[data-v-ffc64454] {
    position: relative;
    cursor: pointer;
    display: flex;
    align-items: center;
    color: rgba(51, 51, 51, 0.6);
}

.collect-icon[data-v-ffc64454],
.count[data-v-ffc64454] {
    color: #333;
}

.reds-icon[data-v-7c2d5134] {
    display: inline-block;
    vertical-align: middle;
    fill: currentColor;
}

.buttons[data-v-36e1f3e7] .count {
    margin-left: 6px;
    margin-right: 12px;
    font-weight: 500;
    font-size: 12px;
}

// .reds-icon[data-v-7c2d5134] {
//     display: inline-block;
//     vertical-align: middle;
//     fill: currentColor;
// }

.buttons[data-v-36e1f3e7] .count {
    margin-left: 6px;
    margin-right: 12px;
    font-weight: 500;
    font-size: 12px;
}

.buttons .share-wrapper[data-v-36e1f3e7] {
    position: relative;
}

.buttons .share-icon[data-v-36e1f3e7] {
    cursor: pointer;
    color: #333;
}

.reds-icon {
    display: inline-block;
    vertical-align: middle;
    fill: currentColor;
}

// .comment-comp[data-v-e223d0aa] {
//     margin-top: 20px;
// }

.comment-wrapper[data-v-e6930618] {
    display: flex;
    font-size: 16px;
    overflow: hidden;
}

.show-more[data-v-6b20f11f] {
    margin-left: 32px;
    margin-top: 16px;
    line-height: 18px;
    color: #13386c;
    cursor: pointer;
}

.mention-select-container.close[data-v-e6930618] {
    opacity: 0;
    z-index: -1;
    transform: translate(-19px, -100%);
    animation: mention-hide-e6930618 .2s;
}

.mention-select-container[data-v-e6930618] {
    position: absolute;
    width: 376px;
    height: 160px;
    padding: 20px 16px;
    background: #fff;
    box-shadow: 0 4px 32px 0 rgba(0, 0, 0, 0.06), 0 1px 4px 0 rgba(0, 0, 0, 0.03);
    border-radius: 12px;
    overflow: auto;
    display: none;
}

.input-wrapper[data-v-e6930618] {
    display: flex;
    position: relative;
    width: 100%;
    flex-shrink: 0;
    transition: flex .3s;
}

.comment-input[data-v-e6930618]:placeholder-shown {
    background-image: none;
    padding: 12px 92px 12px 36px;
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAANlBMVEUAAAA0NDQyMjIzMzM2NjY2NjYyMjI0NDQ1NTU1NTUzMzM1NTU1NTUzMzM1NTUzMzM1NTU1NTVl84gVAAAAEnRSTlMAmUyGEzlgc2AmfRx9aToKQzCSoXt+AAAAhElEQVRIx+3Uuw6DMAyF4XOcBOdCafv+L9vQkQFyJBak/JOHT7K8GLM7epuHusRhHwP/mejJ77i32CpZh33aD+lDFDzgZFE8+tgUv5BB9NxEb9NPL3i46JvoUUhXPBKZFQ/rTPHI3ZXt8xr12KX055LoAVtXz9kKHprxNMMxXqRvmAn9ACQ7A/tTXYAxAAAAAElFTkSuQmCC);
    background-repeat: no-repeat;
    background-size: 16px 16px;
    background-position: 16px 12px;
    color: rgba(51, 51, 51, 0.3);
}

.comment-input[data-v-e6930618] {
    padding: 12px 92px 12px 16px;
    width: 100%;
    height: 40px;
    line-height: 16px;
    background: rgba(0, 0, 0, 0.03);
    caret-color: rgba(51, 51, 51, 0.3);
    border-radius: 22px;
    border: none;
    outline: none;
    resize: none;
    color: #333;
}

.input-buttons[data-v-e6930618] {
    // position: absolute;
    right: 0;
    top: 0;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    // width: 92px;
    color: rgba(51, 51, 51, 0.3);
}


.reds-icon {
    display: inline-block;
    vertical-align: middle;
    fill: currentColor;
}

.input-buttons .reds-icon {
    margin: 0 6px;
    cursor: pointer;
    transition: all .2s;
}

.submit[data-v-e6930618] {
    margin-left: 8px;
    width: 60px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-weight: 600;
    cursor: pointer;
    flex-shrink: 0;
    background: #3d8af5;
    border-radius: 44px;
    font-size: 16px;
}

button {
    padding: 0;
}

.close-box[data-v-237ed470] {
    display: flex;
}

.close-box[data-v-237ed470] {
    width: 40px;
    height: 40px;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 100%;
    background: #fff;
    color: rgba(51, 51, 51, 0.8);
    display: none;
    position: absolute;
    left: 0;
    top: 0;
    margin: 12px;
    z-index: 5;
}

.note-content-emoji {
    margin: 0 1px;
    height: 16px;
    transform: translateY(2px);
}

img {
    border-style: none;
}

.buttons .chat-wrapper[data-v-36e1f3e7] {
    cursor: pointer;
    color: #333;
}

.avatar[data-v-67377e58] {
    flex: 0 0 auto;
}

.avatar[data-v-1d0a8701] {
    align-items: center;
    justify-content: center;
    display: flex;
    cursor: pointer;
    border-radius: 100%;
    border: 1px solid rgba(0, 0, 0, 0.08);
    object-fit: cover;
}

.right[data-v-67377e58] {
    margin-left: 12px;
    // padding-bottom: 16px;
    display: flex;
    flex-direction: column;
    font-size: 14px;
    flex-grow: 1;
    // border-bottom: 1px solid rgba(0, 0, 0, 0.08);
}

.author-wrapper[data-v-67377e58] {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.author[data-v-67377e58] {
    display: flex;
    align-items: center;
}

.name[data-v-67377e58] {
    color: rgba(51, 51, 51, 0.6);
    line-height: 18px;
}

.content[data-v-67377e58] {
    margin-top: 5px;
    line-height: 22px;
    color: #333;
}

.labels[data-v-67377e58] {
    margin-top: 4px;
}

.info[data-v-67377e58] {
    display: flex;
    justify-content: space-between;
    margin-top: 12px;
    font-size: 12px;
    color: rgba(51, 51, 51, 0.6);
    line-height: 16px;
}

.location[data-v-67377e58] {
    margin-left: 5px;
}

.interactions[data-v-67377e58] {
    display: flex;
}

.like-wrapper[data-v-809eb46a] {
    position: relative;
    cursor: pointer;
    display: flex;
    align-items: center;
}

.like-lottie[data-v-809eb46a] {
    position: absolute;
    left: 0;
    top: 0;
    transform: scale(1.7);
}

.reds-icon[data-v-7c2d5134] {
    display: inline-block;
    vertical-align: middle;
    fill: currentColor;
}

.count {
    margin-left: 4px;
}

// .comment-floor {
//     margin-left;
// }
.reply[data-v-67377e58] {
    margin-left: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}

.icon-container[data-v-67377e58] {
    color: rgba(51, 51, 51, 0.6);
}

[data-v-956360f6] .close-box {
    top: 72px;
}

.close-box[data-v-237ed470] {
    display: flex;
}

.close-box[data-v-237ed470] {
    width: 40px;
    height: 40px;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 100%;
    background: #fff;
    color: rgba(51, 51, 51, 0.8);
    display: none;
    position: absolute;
    left: 0;
    top: 0;
    margin: 12px;
    z-index: 5;
}

.reds-icon[data-v-7c2d5134] {
    display: inline-block;
    vertical-align: middle;
    fill: currentColor;
}

[data-v-956360f6] .note-container {
    box-shadow: none;
    transition: height .6s;
}

.note-container[data-v-70c71a67] {
    box-shadow: none;
    height: 100%;
    width: 100%;
    border-radius: 0;
    border: 0;
    flex-direction: column;
    overflow: scroll;
    transition: none;
}

// .note-container[data-v-70c71a67] {
//     display: flex;
//     border: 1px solid var(--color-border);
//     box-shadow: var(--elevation-note-shadow);
//     border-radius: 20px;
//     background: var(--elevation-note-background);
//     transform-origin: left top;
// }

/* 添加这段样式后，Primary Button 会变成红色 */
// :root:root {
//     --van-popup-round-radius: 2px;
// }

.van-text-ellipsis /deep/ .van-text-ellipsis__action {
    cursor: pointer;
    color: rgb(19, 56, 108);
}

.van-cell:not(:last-child)::after {
    -webkit-transform: scaleY(1);
    transform: scaleY(1);
    top: 0;
}

// .van-text-ellipsis {
//     line-height: var(--van-text-ellipsis-line-height);
//     // white-space: pre-wrap;
//     word-break: break-word;
// }
</style>

